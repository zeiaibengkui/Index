var defTime=16,canvas=document.getElementById("meteorCanvas"),ctx=canvas.getContext("2d"),vmin=Math.min(window.innerHeight,window.innerWidth)/100,time=0;canvas.width=window.innerWidth,canvas.height=window.innerHeight;var Meteor=function(){function t(){this.angle=Math.PI/6,this.init()}return t.prototype.randomColor=function(){var t=Math.ceil(255-240*Math.random());return"rgba("+t+","+t+","+t+",1)"},t.prototype.init=function(){this.length=(50*Math.random()+50)*vmin,this.x=-2*Math.random()*window.innerWidth,this.y=-2*Math.random()*window.innerHeight,this.color=["white",this.randomColor(),"transparent"],this.speed=(.25*Math.random()+1)*defTime},t.prototype.update=function(){this.x+=this.speed*Math.cos(this.angle),this.y+=this.speed*Math.sin(this.angle),this.x+this.length>canvas.width&&this.y-this.length>canvas.height&&this.init()},t.prototype.draw=function(){ctx.beginPath(),ctx.moveTo(this.x,this.y);var t=ctx.createLinearGradient(this.x,this.y,this.x-this.width(),this.y-this.height());t.addColorStop(0,this.color[0]),t.addColorStop(.3,this.color[1]),t.addColorStop(.6,this.color[2]),ctx.strokeStyle=t,ctx.lineTo(this.x-this.width(),this.y-this.height()),ctx.lineWidth=3,ctx.stroke()},t.prototype.height=function(){return this.length*Math.sin(this.angle)},t.prototype.width=function(){return this.length*Math.cos(this.angle)},t}(),Star=function(){function t(){this.x=window.innerWidth*Math.random(),this.y=window.innerHeight*Math.random(),this.baseOpacity=+Math.random().toFixed(2),this.speed=Math.random()}return t.prototype.draw=function(){ctx.fillStyle=this.color,ctx.fillText(".",this.x,this.y)},t.prototype.update=function(){this.opacity=Math.cos(360*this.baseOpacity+.002*time*this.speed),this.color="rgb(255,255,255,"+this.opacity+")"},t}(),meteors=[],stars=[];function initArray(){meteors=stars=[];for(var t=0;t<vmin/20+3;t++){meteors.push(new Meteor);for(var i=0;i<15*Math.random()+20;i++)stars.push(new Star)}}function animate(t){defTime=t-time,time=t,ctx.clearRect(0,0,canvas.width,canvas.height),meteors.forEach(function(t){t.update(),t.draw()}),stars.forEach(function(t){t.update(),t.draw()}),requestAnimationFrame(animate)}initArray(),animate(time),window.addEventListener("resize",function(){vmin=Math.min(window.innerHeight,window.innerWidth)/100,canvas.width=window.innerWidth,canvas.height=window.innerHeight,initArray()});